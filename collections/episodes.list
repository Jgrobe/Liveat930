<squarespace:query collection="artists">
    <script>
        var _artists = {items|json};
        console.log('_artists', _artists);
        var _artistsReady = true;
        jQuery(document).trigger('artistsReady', _artists);
    </script>
</squarespace:query>
{.repeated section items}
    {.repeated section categories}
        {.equal?:@:"current"}
            <section class="landing episodes-landing">
                <div class="fill-parent mask">
                    <div class="landing-bg" style="background-image:url('{customContent.hero-fallback-image.assetUrl}');" data-shape="{customContent.episode-shape}">
                        <video src="{customContent.episode-hero-video}" class="loop" muted autoplay></video>
                    </div><!-- landing-bg -->
                </div><!-- .fill-parent -->

                <div class="landing-container">

                    <div class="episodes-landing-head prllx-stndrd">
                        <div class="small">Latest Show</div>
                        <h1 class="l-headline">Episode No.{customContent.episode-number}</h1>
                    </div>
                    <div class="episodes-landing-sub prllx-stndrd">
                        <span>with</span>
                        <p id="lineup_preview" data-artists="{customContent.featured-artists}"></p>
                        <script>
                            var $lineupPreview = jQuery('#lineup_preview');
                            var previewwartists = $lineupPreview.data('artists').split(',').slice(0,4).join(' / ');
                            $lineupPreview.html(previewwartists+' & more')
                        </script>
                    </div><!-- .episodes-landing-sub -->

                    <div class="cta-dummy" data-icon="eye" data-label="Watch now" data-class="landing-cta prllx-custom" data-attributes="href={fullUrl},data-prllx=.04">{@|apply svg-icon-eye.block}</div>

                </div><!-- .landing-container -->
            </section>
        {.end}
    {.end}
{.end}

<div class="site-content">

    <section class="episodes-previous">
        <div class="section-head prllx-custom" data-prllx="-.04">
            <h2>Past Shows</h2>
            <p>See the performances</p>
        </div><!-- .section-head -->
        <div class="episodes-overview posters">

            {.repeated section items}
                {.repeated section categories}
                    {.equal?:@:"aired"}

                        <div class="episodes-overview-item prllxposter">
                            {@|apply poster-parallax.block}
                            <div class="cta-dummy" data-label="Explore" data-icon="eye" data-attributes="href={fullUrl}">{@|apply svg-icon-eye.block}</div>
                            <div class="light"></div>
                        </div><!-- .episodes-overview-item -->

                    {.end}
                {.end}
            {.end}<!-- .end repeated items -->

        </div><!-- .posters.episodes-overview -->
    </section><!-- .episodes-previous -->

    <squarespace:query collection="{collection.urlId}" category="upcoming" limit="3">
        <section class="episodes-upcoming">
            <div class="section-head prllx-custom" data-prllx=".03">
                <h2>Next Shows</h2>
                <p>See who's coming</p>
            </div>
            <ul>
                {.repeated section items}
                <li>
                    <a href="{fullUrl}" class="img tv prllx-custom" data-prllx=".086" style="background-image:url('{customContent.upcoming-thumbnail.assetUrl}');">
                        <div class="inside prllx-lo-stndrd">
                            <span>Ep10{customContent.episode-number}</span><strong>{addedOn|date %b %Y}</strong>
                        </div>
                    </a>
                </li>
                {.end}
            </ul>
        </section>
    </squarespace:query>
</div>
<squarespace:script src="custom/handleArtists.js" />
<squarespace:script src="custom/page_episodes.js" />